<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Inspire</title>
    <script>
        var tData = [
            {
                "name": "COLT-SA-01",
                "data": [
                    { "TRANSACTION_DATE": "03-NOV-2020", "TRANSACTION_COUNT": 26546 },
                    { "TRANSACTION_DATE": "02-NOV-2020", "TRANSACTION_COUNT": 33276 },
                    { "TRANSACTION_DATE": "01-NOV-2020", "TRANSACTION_COUNT": 46049 },
                    { "TRANSACTION_DATE": "31-OCT-2020", "TRANSACTION_COUNT": 33964 },
                    { "TRANSACTION_DATE": "30-OCT-2020", "TRANSACTION_COUNT": 14108 },
                    { "TRANSACTION_DATE": "29-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "27-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "26-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "25-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "24-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "23-OCT-2020", "TRANSACTION_COUNT": 200 },
                    { "TRANSACTION_DATE": "22-OCT-2020", "TRANSACTION_COUNT": 199 },
                    { "TRANSACTION_DATE": "21-OCT-2020", "TRANSACTION_COUNT": 58 },
                    { "TRANSACTION_DATE": "20-OCT-2020", "TRANSACTION_COUNT": 264 },
                    { "TRANSACTION_DATE": "19-OCT-2020", "TRANSACTION_COUNT": 49 }
                ]
            },
            {
                "name": "COLT-SA-02",
                "data": [
                    { "TRANSACTION_DATE": "03-NOV-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "02-NOV-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "01-NOV-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "31-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "30-OCT-2020", "TRANSACTION_COUNT": 11 },
                    { "TRANSACTION_DATE": "29-OCT-2020", "TRANSACTION_COUNT": 1 },
                    { "TRANSACTION_DATE": "27-OCT-2020", "TRANSACTION_COUNT": 779 },
                    { "TRANSACTION_DATE": "26-OCT-2020", "TRANSACTION_COUNT": 638 },
                    { "TRANSACTION_DATE": "25-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "24-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "23-OCT-2020", "TRANSACTION_COUNT": 228 },
                    { "TRANSACTION_DATE": "22-OCT-2020", "TRANSACTION_COUNT": 34858 },
                    { "TRANSACTION_DATE": "21-OCT-2020", "TRANSACTION_COUNT": 28944 },
                    { "TRANSACTION_DATE": "20-OCT-2020", "TRANSACTION_COUNT": 28193 },
                    { "TRANSACTION_DATE": "19-OCT-2020", "TRANSACTION_COUNT": 30106 }
                ]
            },
            {
                "name": "COLT-SA-03",
                "data": [
                    { "TRANSACTION_DATE": "03-NOV-2020", "TRANSACTION_COUNT": 2861 },
                    { "TRANSACTION_DATE": "02-NOV-2020", "TRANSACTION_COUNT": 1848 },
                    { "TRANSACTION_DATE": "01-NOV-2020", "TRANSACTION_COUNT": 1189 },
                    { "TRANSACTION_DATE": "31-OCT-2020", "TRANSACTION_COUNT": 445 },
                    { "TRANSACTION_DATE": "30-OCT-2020", "TRANSACTION_COUNT": 4536 },
                    { "TRANSACTION_DATE": "29-OCT-2020", "TRANSACTION_COUNT": 4605 },
                    { "TRANSACTION_DATE": "27-OCT-2020", "TRANSACTION_COUNT": 4029 },
                    { "TRANSACTION_DATE": "26-OCT-2020", "TRANSACTION_COUNT": 2481 },
                    { "TRANSACTION_DATE": "25-OCT-2020", "TRANSACTION_COUNT": 7 },
                    { "TRANSACTION_DATE": "24-OCT-2020", "TRANSACTION_COUNT": 13 },
                    { "TRANSACTION_DATE": "23-OCT-2020", "TRANSACTION_COUNT": 928 },
                    { "TRANSACTION_DATE": "22-OCT-2020", "TRANSACTION_COUNT": 4724 },
                    { "TRANSACTION_DATE": "21-OCT-2020", "TRANSACTION_COUNT": 5272 },
                    { "TRANSACTION_DATE": "20-OCT-2020", "TRANSACTION_COUNT": 3083 },
                    { "TRANSACTION_DATE": "19-OCT-2020", "TRANSACTION_COUNT": 2340 }
                ]
            },
            {
                "name": "COLT-SA-06",
                "data": [
                    { "TRANSACTION_DATE": "03-NOV-2020", "TRANSACTION_COUNT": 43 },
                    { "TRANSACTION_DATE": "02-NOV-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "01-NOV-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "31-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "30-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "29-OCT-2020", "TRANSACTION_COUNT": 88 },
                    { "TRANSACTION_DATE": "27-OCT-2020", "TRANSACTION_COUNT": 87 },
                    { "TRANSACTION_DATE": "26-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "25-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "24-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "23-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "22-OCT-2020", "TRANSACTION_COUNT": 29 },
                    { "TRANSACTION_DATE": "21-OCT-2020", "TRANSACTION_COUNT": 104 },
                    { "TRANSACTION_DATE": "20-OCT-2020", "TRANSACTION_COUNT": 6 },
                    { "TRANSACTION_DATE": "19-OCT-2020", "TRANSACTION_COUNT": 0 }
                ]
            },
            {
                "name": "COLT-SA-07",
                "data": [
                    { "TRANSACTION_DATE": "03-NOV-2020", "TRANSACTION_COUNT": 53555 },
                    { "TRANSACTION_DATE": "02-NOV-2020", "TRANSACTION_COUNT": 8808 },
                    { "TRANSACTION_DATE": "01-NOV-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "31-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "30-OCT-2020", "TRANSACTION_COUNT": 126 },
                    { "TRANSACTION_DATE": "29-OCT-2020", "TRANSACTION_COUNT": 3937 },
                    { "TRANSACTION_DATE": "27-OCT-2020", "TRANSACTION_COUNT": 2606 },
                    { "TRANSACTION_DATE": "26-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "25-OCT-2020", "TRANSACTION_COUNT": 0 },
                    { "TRANSACTION_DATE": "24-OCT-2020", "TRANSACTION_COUNT": 11 },
                    { "TRANSACTION_DATE": "23-OCT-2020", "TRANSACTION_COUNT": 60 },
                    { "TRANSACTION_DATE": "22-OCT-2020", "TRANSACTION_COUNT": 61 },
                    { "TRANSACTION_DATE": "21-OCT-2020", "TRANSACTION_COUNT": 968 },
                    { "TRANSACTION_DATE": "20-OCT-2020", "TRANSACTION_COUNT": 1144 },
                    { "TRANSACTION_DATE": "19-OCT-2020", "TRANSACTION_COUNT": 61 }
                ]
            },
            {
                "name": "COLT-SA-08",
                "data": [
                    { "TRANSACTION_DATE": "03-NOV-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "02-NOV-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "01-NOV-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "31-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "30-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "29-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "27-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "26-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "25-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "24-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "23-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "22-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "21-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "20-OCT-2020", "TRANSACTION_COUNT": null },
                    { "TRANSACTION_DATE": "19-OCT-2020", "TRANSACTION_COUNT": null }
                ]
            }
        ];


        window.onload = function () {
            var jArray = [];
            tData.forEach((element) => {
                var max = element.data.reduce(function (prev, current) {
                    return (prev.TRANSACTION_COUNT > current.TRANSACTION_COUNT) ? prev : current
                });

                var dataArray = [];
                element.data.forEach((d) => {
                    var percentage = 0;
                    var dTCount = d.TRANSACTION_COUNT;
                    var maxCount = max.TRANSACTION_COUNT;
                    if (maxCount == null || maxCount == undefined || maxCount == NaN ||
                        dTCount == null || dTCount == undefined || dTCount == NaN) {
                        percentage = 0;
                    }
                    else {
                        percentage = parseInt((d.TRANSACTION_COUNT / max.TRANSACTION_COUNT) * 100);
                    }

                    var dData = {
                        "date": d.TRANSACTION_DATE,
                        "percentage": percentage
                    };
                    dataArray.push(dData);
                });

                var jData = {
                    "name": element.name,
                    "data": dataArray
                };
                jArray.push(jData);
            });
            console.log(jArray);
        }
    </script>
</head>

<body id="page-top">

</body>

</html>
